<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#FF9500">
    <title>Armstr - Shopping App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }


    :root {
        --primary: #FF9500;
        --primary-dark: #E68600;
        --secondary: #FF6B35;
        --background: #F8F9FA;
        --surface: #FFFFFF;
        --text-primary: #1A1A1A;
        --text-secondary: #6B7280;
        --border: #E5E7EB;
        --success: #10B981;
        --danger: #EF4444;
        --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
        --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
        --shadow-lg: 0 10px 30px rgba(0,0,0,0.15);
    }

    body {
        font-family: 'Outfit', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: var(--background);
        color: var(--text-primary);
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        padding-bottom: env(safe-area-inset-bottom);
    }

    .app-container {
        max-width: 500px;
        margin: 0 auto;
        background: var(--background);
        min-height: 100vh;
        position: relative;
        padding-bottom: 80px;
    }

    /* App Header */
    .app-header {
        background: var(--primary);
        color: white;
        padding: 16px 20px 20px;
        padding-top: calc(16px + env(safe-area-inset-top));
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 4px 12px rgba(255, 149, 0, 0.3);
        transition: all 0.3s ease;
    }

    .app-header.compact {
        padding: 12px 20px;
        padding-top: calc(12px + env(safe-area-inset-top));
    }

    .app-header.search-active {
        padding-bottom: 20px;
    }

    .header-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
        transition: margin 0.3s ease;
    }

    .app-header.compact .header-top {
        margin-bottom: 0;
    }

    .app-header.search-active .header-top {
        margin-bottom: 16px;
    }

    .logo {
        font-size: 28px;
        font-weight: 800;
        letter-spacing: -0.5px;
        transition: font-size 0.3s ease;
    }

    .app-header.compact .logo {
        font-size: 24px;
    }

    .header-icons {
        display: flex;
        gap: 16px;
    }

    .app-header.compact .header-icons {
        gap: 12px;
    }

    .icon-btn {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(10px);
        border: none;
        color: white;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    .app-header.compact .icon-btn {
        width: 36px;
        height: 36px;
        font-size: 18px;
    }

    .icon-btn:active {
        transform: scale(0.92);
        background: rgba(255,255,255,0.25);
    }

    .badge {
        position: absolute;
        top: -4px;
        right: -4px;
        background: var(--secondary);
        color: white;
        font-size: 11px;
        font-weight: 700;
        min-width: 20px;
        height: 20px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 6px;
        border: 2px solid var(--primary);
        animation: badgePop 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .app-header.compact .badge {
        min-width: 18px;
        height: 18px;
        font-size: 10px;
        top: -3px;
        right: -3px;
    }

    @keyframes badgePop {
        0% { transform: scale(0); }
        70% { transform: scale(1.1); }
        100% { transform: scale(1); }
    }

    /* Search Bar */
    .search-container {
        position: relative;
        max-height: 52px;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .app-header.compact .search-container {
        max-height: 0;
        opacity: 0;
    }

    .app-header.search-active .search-container {
        max-height: 52px;
        opacity: 1;
    }

    .search-bar {
        width: 100%;
        padding: 14px 48px 14px 48px;
        border-radius: 16px;
        border: none;
        background: rgba(255,255,255,0.95);
        backdrop-filter: blur(10px);
        font-size: 15px;
        font-family: 'Outfit', sans-serif;
        font-weight: 500;
        color: var(--text-primary);
        transition: all 0.3s ease;
    }

    .search-bar::placeholder {
        color: var(--text-secondary);
        font-weight: 400;
    }

    .search-bar:focus {
        outline: none;
        background: white;
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }

    .search-icon-left {
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 20px;
        color: var(--text-secondary);
        pointer-events: none;
    }

    .search-close {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .search-close:active {
        background: rgba(0,0,0,0.05);
        transform: translateY(-50%) scale(0.9);
    }

    /* Page Container */
    .page {
        display: none;
        animation: fadeIn 0.3s ease;
    }

    .page.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Promo Banner Carousel */
    .promo-carousel {
        margin: 20px 16px;
        position: relative;
        overflow: hidden;
        border-radius: 24px;
    }

    .promo-track {
        display: flex;
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .promo-banner {
        min-width: 100%;
        padding: 24px;
        color: white;
        position: relative;
        overflow: hidden;
    }

    .promo-banner.flash-sale {
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    }

    .promo-banner.new-arrivals {
        background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
    }

    .promo-banner.mega-deals {
        background: linear-gradient(135deg, #10B981 0%, #059669 100%);
    }

    .promo-banner.free-shipping {
        background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
    }

    .promo-banner::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -20%;
        width: 300px;
        height: 300px;
        background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        50% { transform: translate(-20px, 20px) rotate(180deg); }
    }

    .promo-content {
        position: relative;
        z-index: 1;
    }

    .promo-title {
        font-size: 26px;
        font-weight: 800;
        margin-bottom: 8px;
        line-height: 1.2;
    }

    .promo-subtitle {
        font-size: 15px;
        opacity: 0.9;
        font-weight: 500;
    }

    /* Carousel Dots */
    .carousel-dots {
        position: absolute;
        bottom: 16px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
        z-index: 2;
    }

    .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: rgba(255,255,255,0.4);
        transition: all 0.3s ease;
        cursor: pointer;
    }

    .dot.active {
        width: 24px;
        border-radius: 4px;
        background: rgba(255,255,255,0.9);
    }

    /* Section */
    .section {
        margin: 0 0 24px;
    }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px 12px;
    }

    .section-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--text-primary);
    }

    .see-all {
        font-size: 14px;
        color: var(--primary);
        font-weight: 600;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 4px;
    }

    /* Categories */
    .categories-scroll {
        display: flex;
        gap: 12px;
        padding: 0 20px;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        margin-bottom: 8px;
    }

    .categories-scroll::-webkit-scrollbar {
        display: none;
    }

    .category-chip {
        flex-shrink: 0;
        padding: 12px 20px;
        background: var(--surface);
        border-radius: 20px;
        font-size: 14px;
        font-weight: 600;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid transparent;
        scroll-snap-align: start;
        white-space: nowrap;
        box-shadow: var(--shadow-sm);
    }

    .category-chip:active {
        transform: scale(0.95);
    }

    .category-chip.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        box-shadow: 0 4px 12px rgba(255, 149, 0, 0.3);
    }

    /* Products Grid */
    .products-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        padding: 0 16px;
    }

    .product-card {
        background: var(--surface);
        border-radius: 20px;
        overflow: hidden;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--shadow-sm);
    }

    .product-card:active {
        transform: scale(0.97);
    }

    .product-image {
        height: 140px;
        background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        position: relative;
    }

    .discount-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        background: var(--secondary);
        color: white;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 700;
        box-shadow: 0 2px 8px rgba(255, 107, 53, 0.4);
    }

    .product-info {
        padding: 12px;
    }

    .product-name {
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 6px;
        line-height: 1.3;
        height: 34px;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }

    .product-price {
        font-size: 18px;
        font-weight: 800;
        color: var(--primary);
        margin-bottom: 2px;
    }

    .product-old-price {
        font-size: 12px;
        color: var(--text-secondary);
        text-decoration: line-through;
        font-weight: 500;
    }

    .add-cart-btn {
        width: 100%;
        padding: 10px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 12px;
        font-weight: 700;
        font-size: 13px;
        margin-top: 8px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: 'Outfit', sans-serif;
    }

    .add-cart-btn:active {
        transform: scale(0.95);
        background: var(--primary-dark);
    }

    /* Bottom Navigation */
    .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: var(--surface);
        padding: 8px 0 calc(8px + env(safe-area-inset-bottom));
        display: flex;
        justify-content: space-around;
        align-items: center;
        border-top: 1px solid var(--border);
        z-index: 1000;
        max-width: 500px;
        margin: 0 auto;
        box-shadow: 0 -4px 12px rgba(0,0,0,0.08);
    }

    .nav-item {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        cursor: pointer;
        padding: 8px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        color: var(--text-secondary);
        -webkit-tap-highlight-color: transparent;
        user-select: none;
    }

    .nav-item:active {
        transform: scale(0.92);
    }

    .nav-item.active {
        color: var(--primary);
    }

    .nav-item.active::before {
        content: '';
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 32px;
        height: 3px;
        background: var(--primary);
        border-radius: 0 0 3px 3px;
    }

    .nav-icon {
        font-size: 24px;
        transition: all 0.3s ease;
        pointer-events: none;
    }

    .nav-item.active .nav-icon {
        transform: scale(1.1);
    }

    .nav-label {
        font-size: 11px;
        font-weight: 600;
        pointer-events: none;
    }

    .nav-label {
        font-size: 11px;
        font-weight: 600;
    }

    /* Cart Items */
    .cart-list {
        padding: 16px 16px 200px;
    }

    .cart-item {
        display: flex;
        gap: 12px;
        padding: 16px;
        background: var(--surface);
        border-radius: 16px;
        margin-bottom: 12px;
        box-shadow: var(--shadow-sm);
    }

    .cart-item-image {
        width: 80px;
        height: 80px;
        background: var(--background);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 36px;
        flex-shrink: 0;
    }

    .cart-item-info {
        flex: 1;
    }

    .cart-item-name {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 4px;
    }

    .cart-item-price {
        font-size: 18px;
        font-weight: 800;
        color: var(--primary);
        margin-bottom: 8px;
    }

    .quantity-controls {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .quantity-btn {
        width: 32px;
        height: 32px;
        border-radius: 10px;
        border: 2px solid var(--border);
        background: white;
        color: var(--text-primary);
        font-size: 18px;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .quantity-btn:active {
        transform: scale(0.9);
        background: var(--background);
    }

    .quantity-value {
        font-size: 15px;
        font-weight: 700;
        min-width: 24px;
        text-align: center;
    }

    .remove-btn {
        color: var(--danger);
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        margin-left: 8px;
    }

    /* Cart Summary */
    .cart-summary {
        position: fixed;
        bottom: 72px;
        left: 0;
        right: 0;
        max-width: 500px;
        margin: 0 auto;
        background: var(--surface);
        padding: 20px;
        border-radius: 24px 24px 0 0;
        box-shadow: 0 -8px 24px rgba(0,0,0,0.12);
        z-index: 60;
    }

    .summary-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 12px;
        font-size: 14px;
    }

    .summary-row.total {
        font-size: 20px;
        font-weight: 800;
        padding-top: 12px;
        border-top: 2px solid var(--border);
        margin-bottom: 16px;
    }

    .checkout-btn {
        width: 100%;
        padding: 18px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 16px;
        font-size: 16px;
        font-weight: 800;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-family: 'Outfit', sans-serif;
        box-shadow: 0 8px 20px rgba(255, 149, 0, 0.3);
    }

    .checkout-btn:active {
        transform: scale(0.97);
    }

    /* Account Page */
    .account-header {
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        padding: 40px 20px;
        color: white;
        text-align: center;
        border-radius: 0 0 32px 32px;
    }

    .avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 36px;
        margin: 0 auto 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
    }

    .user-name {
        font-size: 24px;
        font-weight: 800;
        margin-bottom: 4px;
    }

    .user-email {
        font-size: 14px;
        opacity: 0.9;
    }

    .menu-list {
        padding: 20px 16px;
    }

    .menu-item {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        background: var(--surface);
        border-radius: 16px;
        margin-bottom: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
    }

    .menu-item:active {
        transform: scale(0.98);
        background: var(--background);
    }

    .menu-icon {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        background: linear-gradient(135deg, rgba(255,149,0,0.1) 0%, rgba(255,107,53,0.1) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
    }

    .menu-text {
        flex: 1;
    }

    .menu-title {
        font-size: 15px;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 2px;
    }

    .menu-subtitle {
        font-size: 12px;
        color: var(--text-secondary);
    }

    .menu-arrow {
        font-size: 20px;
        color: var(--text-secondary);
    }

    /* Search Page */
    .search-page {
        padding: 20px 16px;
    }

    .search-filters {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .search-filters::-webkit-scrollbar {
        display: none;
    }

    .filter-chip {
        padding: 8px 16px;
        background: var(--surface);
        border: 2px solid var(--border);
        border-radius: 20px;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-secondary);
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.3s ease;
    }

    .filter-chip.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
    }

    .search-results {
        font-size: 14px;
        color: var(--text-secondary);
        margin-bottom: 16px;
        font-weight: 500;
    }

    /* Categories Page */
    .categories-page {
        padding: 20px 16px;
    }

    .category-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
        margin-bottom: 20px;
    }

    .category-card-large {
        background: var(--surface);
        border-radius: 20px;
        padding: 24px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: var(--shadow-sm);
        position: relative;
        overflow: hidden;
    }

    .category-card-large::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, transparent 0%, rgba(255,149,0,0.05) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .category-card-large:active {
        transform: scale(0.97);
    }

    .category-card-large:hover::before {
        opacity: 1;
    }

    .category-card-large.electronics {
        background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
    }

    .category-card-large.fashion {
        background: linear-gradient(135deg, #FFF1F2 0%, #FFE4E6 100%);
    }

    .category-card-large.home {
        background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
    }

    .category-card-large.beauty {
        background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%);
    }

    .category-card-large.sports {
        background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
    }

    .category-card-large.books {
        background: linear-gradient(135deg, #FAE8FF 0%, #F5D0FE 100%);
    }

    .category-icon-large {
        font-size: 56px;
        margin-bottom: 12px;
        display: block;
        animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-8px); }
    }

    .category-card-large:nth-child(1) .category-icon-large { animation-delay: 0s; }
    .category-card-large:nth-child(2) .category-icon-large { animation-delay: 0.2s; }
    .category-card-large:nth-child(3) .category-icon-large { animation-delay: 0.4s; }
    .category-card-large:nth-child(4) .category-icon-large { animation-delay: 0.6s; }
    .category-card-large:nth-child(5) .category-icon-large { animation-delay: 0.8s; }
    .category-card-large:nth-child(6) .category-icon-large { animation-delay: 1s; }

    .category-name {
        font-size: 16px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 4px;
    }

    .category-count {
        font-size: 13px;
        color: var(--text-secondary);
        font-weight: 500;
    }

    .category-badge {
        position: absolute;
        top: 12px;
        right: 12px;
        background: var(--secondary);
        color: white;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 700;
        box-shadow: 0 2px 8px rgba(255, 107, 53, 0.4);
    }

    /* Subcategories */
    .back-btn-simple {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: var(--surface);
        border: 2px solid var(--border);
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        flex-shrink: 0;
    }

    .back-btn-simple:active {
        transform: scale(0.95);
        background: var(--background);
    }

    .subcategory-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 24px;
    }

    .subcategory-item {
        background: var(--surface);
        border-radius: 16px;
        padding: 16px 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--shadow-sm);
        border: 2px solid transparent;
    }

    .subcategory-item:active {
        transform: scale(0.98);
        border-color: var(--primary);
    }

    .subcategory-item.active {
        background: linear-gradient(135deg, rgba(255,149,0,0.1) 0%, rgba(255,107,53,0.1) 100%);
        border-color: var(--primary);
    }

    .subcategory-info {
        display: flex;
        align-items: center;
        gap: 16px;
    }

    .subcategory-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(135deg, rgba(255,149,0,0.15) 0%, rgba(255,107,53,0.15) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
    }

    .subcategory-text {
        flex: 1;
    }

    .subcategory-name {
        font-size: 15px;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 2px;
    }

    .subcategory-count {
        font-size: 12px;
        color: var(--text-secondary);
    }

    .subcategory-arrow {
        font-size: 20px;
        color: var(--text-secondary);
        transition: transform 0.3s ease;
    }

    .subcategory-item.active .subcategory-arrow {
        transform: rotate(90deg);
    }

    /* Product Detail */
    .product-detail {
        background: var(--surface);
        min-height: 100vh;
        padding-bottom: 100px;
    }

    .product-detail-image {
        height: 300px;
        background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 120px;
        position: relative;
    }

    .back-btn {
        position: absolute;
        top: 20px;
        left: 20px;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: rgba(255,255,255,0.9);
        backdrop-filter: blur(10px);
        border: none;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: all 0.2s ease;
    }

    .back-btn:active {
        transform: scale(0.95);
    }

    .wishlist-btn {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: rgba(255,255,255,0.9);
        backdrop-filter: blur(10px);
        border: none;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: all 0.2s ease;
    }

    .wishlist-btn:active {
        transform: scale(0.95);
    }

    .product-detail-content {
        padding: 24px 20px 120px;
    }

    .detail-title {
        font-size: 24px;
        font-weight: 800;
        margin-bottom: 8px;
    }

    .detail-rating {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 16px;
    }

    .stars {
        color: #FBBF24;
    }

    .reviews {
        color: var(--text-secondary);
        font-size: 14px;
    }

    .detail-price {
        font-size: 32px;
        font-weight: 900;
        color: var(--primary);
        margin-bottom: 4px;
    }

    .detail-old-price {
        font-size: 18px;
        color: var(--text-secondary);
        text-decoration: line-through;
        margin-right: 12px;
    }

    .detail-discount {
        display: inline-block;
        padding: 4px 12px;
        background: rgba(255,107,53,0.15);
        color: var(--secondary);
        border-radius: 8px;
        font-size: 14px;
        font-weight: 700;
    }

    .detail-section {
        margin-top: 24px;
    }

    .detail-section-title {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 12px;
    }

    .detail-description {
        color: var(--text-secondary);
        line-height: 1.6;
        font-size: 14px;
    }

    .detail-actions {
        position: fixed;
        bottom: 72px;
        left: 0;
        right: 0;
        max-width: 500px;
        margin: 0 auto;
        padding: 16px 20px;
        background: var(--surface);
        border-top: 1px solid var(--border);
        display: flex;
        gap: 12px;
        box-shadow: 0 -4px 12px rgba(0,0,0,0.08);
        z-index: 50;
    }

    .btn-secondary {
        flex: 1;
        padding: 16px;
        background: var(--background);
        color: var(--text-primary);
        border: 2px solid var(--border);
        border-radius: 16px;
        font-weight: 700;
        cursor: pointer;
        font-family: 'Outfit', sans-serif;
        font-size: 14px;
        transition: all 0.2s ease;
    }

    .btn-secondary:active {
        transform: scale(0.97);
        background: var(--border);
    }

    .btn-primary {
        flex: 2;
        padding: 16px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 16px;
        font-weight: 800;
        cursor: pointer;
        font-family: 'Outfit', sans-serif;
        font-size: 14px;
        box-shadow: 0 4px 12px rgba(255, 149, 0, 0.3);
        transition: all 0.2s ease;
    }

    .btn-primary:active {
        transform: scale(0.97);
        box-shadow: 0 2px 8px rgba(255, 149, 0, 0.3);
    }

    /* Orders */
    .order-card {
        background: var(--surface);
        border-radius: 16px;
        padding: 16px;
        margin-bottom: 12px;
        box-shadow: var(--shadow-sm);
    }

    .order-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--border);
    }

    .order-number {
        font-size: 14px;
        font-weight: 700;
        color: var(--text-primary);
    }

    .order-date {
        font-size: 12px;
        color: var(--text-secondary);
    }

    .order-status {
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 700;
    }

    .order-status.delivered {
        background: rgba(16,185,129,0.1);
        color: var(--success);
    }

    .order-status.processing {
        background: rgba(255,149,0,0.1);
        color: var(--primary);
    }

    .order-status.shipped {
        background: rgba(59,130,246,0.1);
        color: #3B82F6;
    }

    .order-items {
        margin-bottom: 12px;
    }

    .order-item-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 4px;
        font-size: 13px;
    }

    .order-item-clickable {
        cursor: pointer;
        padding: 8px;
        margin: 0 -8px 4px;
        border-radius: 8px;
        transition: all 0.2s ease;
    }

    .order-item-clickable:hover {
        background: var(--background);
    }

    .order-item-clickable:active {
        background: var(--border);
        transform: scale(0.98);
    }

    .order-total {
        font-size: 18px;
        font-weight: 800;
        color: var(--primary);
        text-align: right;
    }

    /* Notifications */
    .notification-card {
        display: flex;
        gap: 12px;
        padding: 16px;
        background: var(--surface);
        border-radius: 16px;
        margin-bottom: 12px;
        cursor: pointer;
        box-shadow: var(--shadow-sm);
    }

    .notification-card.unread {
        border-left: 4px solid var(--primary);
    }

    .notification-icon {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        flex-shrink: 0;
    }

    .notification-icon.order {
        background: rgba(16,185,129,0.1);
    }

    .notification-icon.promo {
        background: rgba(255,149,0,0.1);
    }

    .notification-content {
        flex: 1;
    }

    .notification-title {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 4px;
    }

    .notification-text {
        font-size: 13px;
        color: var(--text-secondary);
        margin-bottom: 4px;
    }

    .notification-time {
        font-size: 11px;
        color: var(--text-secondary);
    }

    /* Empty State */
    .empty-state {
        text-align: center;
        padding: 60px 20px;
    }

    .empty-icon {
        font-size: 80px;
        margin-bottom: 16px;
        opacity: 0.5;
    }

    .empty-title {
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 8px;
    }

    .empty-text {
        font-size: 14px;
        color: var(--text-secondary);
        margin-bottom: 20px;
    }

    .empty-action {
        display: inline-block;
        padding: 12px 24px;
        background: var(--primary);
        color: white;
        border-radius: 12px;
        font-weight: 700;
        text-decoration: none;
    }

    /* Toast */
    .toast {
        position: fixed;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: var(--text-primary);
        color: white;
        padding: 16px 24px;
        border-radius: 16px;
        font-size: 14px;
        font-weight: 600;
        z-index: 3000;
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 8px 24px rgba(0,0,0,0.3);
        max-width: 80%;
    }

    .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }

    /* Page Header */
    .page-header {
        padding: 20px;
        background: var(--surface);
        border-bottom: 1px solid var(--border);
    }

    .page-title {
        font-size: 28px;
        font-weight: 800;
        color: var(--text-primary);
    }

    .page-subtitle {
        font-size: 14px;
        color: var(--text-secondary);
        margin-top: 4px;
    }

    /* Loading */
    .spinner {
        width: 24px;
        height: 24px;
        border: 3px solid rgba(255,149,0,0.2);
        border-top-color: var(--primary);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    .content-padding {
        padding: 0 16px 120px;
    }

    /* Interactive Guide/Tutorial Overlay */
    .guide-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 2000;
        pointer-events: none;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    .guide-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    .guide-backdrop {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.75);
        backdrop-filter: blur(2px);
        pointer-events: auto;
    }

    .guide-spotlight {
        position: absolute;
        border: 3px solid var(--primary);
        border-radius: 12px;
        box-shadow: 0 0 0 4000px rgba(0, 0, 0, 0.75),
                    0 0 20px rgba(255, 149, 0, 0.6);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        pointer-events: none;
        z-index: 2001;
    }

    .guide-tooltip {
        position: absolute;
        max-width: 320px;
        background: white;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        z-index: 2002;
        pointer-events: auto;
        animation: tooltipSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes tooltipSlideIn {
        from {
            opacity: 0;
            transform: translateY(20px) scale(0.95);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .guide-tooltip::before {
        content: '';
        position: absolute;
        width: 0;
        height: 0;
        border-style: solid;
    }

    .guide-tooltip.arrow-top::before {
        top: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-width: 0 10px 10px 10px;
        border-color: transparent transparent white transparent;
    }

    .guide-tooltip.arrow-bottom::before {
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        border-width: 10px 10px 0 10px;
        border-color: white transparent transparent transparent;
    }

    .guide-tooltip.arrow-left::before {
        left: -10px;
        top: 50%;
        transform: translateY(-50%);
        border-width: 10px 10px 10px 0;
        border-color: transparent white transparent transparent;
    }

    .guide-tooltip.arrow-right::before {
        right: -10px;
        top: 50%;
        transform: translateY(-50%);
        border-width: 10px 0 10px 10px;
        border-color: transparent transparent transparent white;
    }

    .guide-step-counter {
        font-size: 12px;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .guide-title {
        font-size: 18px;
        font-weight: 800;
        color: var(--text-primary);
        margin-bottom: 8px;
    }

    .guide-description {
        font-size: 14px;
        color: var(--text-secondary);
        line-height: 1.5;
        margin-bottom: 16px;
    }

    .guide-buttons {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
    }

    .guide-skip {
        padding: 10px 20px;
        background: transparent;
        color: var(--text-secondary);
        border: none;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        font-family: 'Outfit', sans-serif;
        transition: all 0.2s ease;
    }

    .guide-skip:active {
        background: var(--background);
    }

    .guide-next {
        padding: 10px 24px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
        font-family: 'Outfit', sans-serif;
        box-shadow: 0 2px 8px rgba(255, 149, 0, 0.3);
        transition: all 0.2s ease;
    }

    .guide-next:active {
        transform: scale(0.95);
    }

    /* Floating Chat Button */
    .chat-fab {
        position: fixed;
        bottom: 90px;
        right: 20px;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        color: white;
        border: none;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 8px 24px rgba(255, 149, 0, 0.4);
        z-index: 90;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .chat-fab:active {
        transform: scale(0.9);
    }

    .chat-fab.hidden {
        transform: scale(0);
        opacity: 0;
    }

    /* Chat Interface */
    .chat-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 1500;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .chat-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    .chat-container {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        max-width: 500px;
        margin: 0 auto;
        height: 80vh;
        background: var(--surface);
        border-radius: 24px 24px 0 0;
        display: flex;
        flex-direction: column;
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 1501;
    }

    .chat-container.active {
        transform: translateY(0);
    }

    .chat-header {
        padding: 20px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        color: white;
        border-radius: 24px 24px 0 0;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .chat-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
    }

    .chat-header-info {
        flex: 1;
    }

    .chat-header-title {
        font-size: 16px;
        font-weight: 700;
        margin-bottom: 2px;
    }

    .chat-header-status {
        font-size: 12px;
        opacity: 0.9;
    }

    .chat-close {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .chat-close:active {
        transform: scale(0.9);
        background: rgba(255, 255, 255, 0.3);
    }

    .chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        background: var(--background);
    }

    .chat-message {
        display: flex;
        gap: 8px;
        margin-bottom: 16px;
        animation: messageSlide 0.3s ease;
    }

    @keyframes messageSlide {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .chat-message.user {
        flex-direction: row-reverse;
    }

    .chat-message-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: var(--primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        flex-shrink: 0;
    }

    .chat-message.user .chat-message-avatar {
        background: var(--text-secondary);
    }

    .chat-message-bubble {
        max-width: 70%;
        padding: 12px 16px;
        border-radius: 16px;
        background: white;
        box-shadow: var(--shadow-sm);
    }

    .chat-message.user .chat-message-bubble {
        background: var(--primary);
        color: white;
    }

    .chat-message-text {
        font-size: 14px;
        line-height: 1.5;
    }

    .chat-message-time {
        font-size: 11px;
        color: var(--text-secondary);
        margin-top: 4px;
    }

    .chat-message.user .chat-message-time {
        color: rgba(255, 255, 255, 0.8);
    }

    .chat-typing {
        display: flex;
        gap: 4px;
        padding: 12px 16px;
    }

    .chat-typing-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--text-secondary);
        animation: typingDot 1.4s infinite;
    }

    .chat-typing-dot:nth-child(2) {
        animation-delay: 0.2s;
    }

    .chat-typing-dot:nth-child(3) {
        animation-delay: 0.4s;
    }

    @keyframes typingDot {
        0%, 60%, 100% {
            transform: translateY(0);
            opacity: 0.4;
        }
        30% {
            transform: translateY(-8px);
            opacity: 1;
        }
    }

    .chat-input-container {
        padding: 16px 20px calc(16px + env(safe-area-inset-bottom));
        background: var(--surface);
        border-top: 1px solid var(--border);
    }

    .chat-input-wrapper {
        display: flex;
        gap: 12px;
        align-items: center;
    }

    .chat-input {
        flex: 1;
        padding: 12px 16px;
        border-radius: 24px;
        border: 2px solid var(--border);
        background: var(--background);
        font-size: 16px;
        font-family: 'Outfit', sans-serif;
        outline: none;
        transition: all 0.2s ease;
    }

    .chat-input:focus {
        border-color: var(--primary);
        background: white;
    }

    .chat-send {
        width: 44px;
        height: 44px;
        border-radius: 50%;
        background: var(--primary);
        border: none;
        color: white;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        flex-shrink: 0;
    }

    .chat-send:active {
        transform: scale(0.9);
        background: var(--primary-dark);
    }

    .chat-send:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .quick-replies {
        display: flex;
        gap: 8px;
        margin-top: 12px;
        overflow-x: auto;
        scrollbar-width: none;
    }

    .quick-replies::-webkit-scrollbar {
        display: none;
    }

    .quick-reply {
        padding: 8px 16px;
        border-radius: 20px;
        background: white;
        border: 2px solid var(--border);
        font-size: 13px;
        font-weight: 600;
        color: var(--text-primary);
        cursor: pointer;
        white-space: nowrap;
        transition: all 0.2s ease;
    }

    .quick-reply:active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
    }
</style>


</head>
<body>
    <div class="app-container">
        <!-- INTERACTIVE GUIDE/TUTORIAL OVERLAY -->
        <div id="guideOverlay" class="guide-overlay">
            <div class="guide-backdrop"></div>
            <div class="guide-spotlight" id="guideSpotlight"></div>
            <div class="guide-tooltip" id="guideTooltip">
                <div class="guide-step-counter" id="guideStepCounter">1 of 6</div>
                <h3 class="guide-title" id="guideTitle">Welcome to Armstr!</h3>
                <p class="guide-description" id="guideDescription">Let's take a quick tour to show you around</p>
                <div class="guide-buttons">
                    <button class="guide-skip" onclick="skipGuide()">Skip Tour</button>
                    <button class="guide-next" onclick="nextGuideStep()">Next</button>
                </div>
            </div>
        </div>


    <!-- App Header -->
    <header class="app-header" id="appHeader">
        <div class="header-top">
            <div class="logo">ARMSTR</div>
            <div class="header-icons">
                <button class="icon-btn" id="searchBtn" onclick="expandSearch()" style="display: none;">
                    üîç
                </button>
                <button class="icon-btn" onclick="navigateTo('notifications')">
                    üîî
                    <span class="badge">3</span>
                </button>
                <button class="icon-btn" onclick="navigateTo('cart')">
                    üõí
                    <span class="badge" id="cartBadge">0</span>
                </button>
            </div>
        </div>
        <div class="search-container" id="searchContainer">
            <span class="search-icon-left">üîç</span>
            <input type="text" class="search-bar" id="searchInput" placeholder="Search products..." oninput="handleSearch()">
            <button class="search-close" id="searchClose" onclick="collapseSearch()" style="display: none;">‚úï</button>
        </div>
    </header>

    <!-- HOME PAGE -->
    <div id="homePage" class="page active">
        <div class="promo-carousel" id="promoCarousel">
            <div class="promo-track" id="promoTrack">
                <div class="promo-banner flash-sale">
                    <div class="promo-content">
                        <div class="promo-title">üéâ Flash Sale</div>
                        <div class="promo-subtitle">Up to 70% off on selected items</div>
                    </div>
                </div>
                <div class="promo-banner new-arrivals">
                    <div class="promo-content">
                        <div class="promo-title">‚ú® New Arrivals</div>
                        <div class="promo-subtitle">Check out the latest trends</div>
                    </div>
                </div>
                <div class="promo-banner mega-deals">
                    <div class="promo-content">
                        <div class="promo-title">üí∞ Mega Deals</div>
                        <div class="promo-subtitle">Save big on top brands</div>
                    </div>
                </div>
                <div class="promo-banner free-shipping">
                    <div class="promo-content">
                        <div class="promo-title">üöö Free Shipping</div>
                        <div class="promo-subtitle">On all orders above $50</div>
                    </div>
                </div>
            </div>
            <div class="carousel-dots" id="carouselDots"></div>
        </div>

        <div class="section">
            <div class="categories-scroll">
                <div class="category-chip active" onclick="filterCategory('all', this)">All</div>
                <div class="category-chip" onclick="filterCategory('Electronics', this)">üì± Electronics</div>
                <div class="category-chip" onclick="filterCategory('Fashion', this)">üëó Fashion</div>
                <div class="category-chip" onclick="filterCategory('Home', this)">üè† Home</div>
                <div class="category-chip" onclick="filterCategory('Beauty', this)">üíÑ Beauty</div>
                <div class="category-chip" onclick="filterCategory('Sports', this)">‚öΩ Sports</div>
                <div class="category-chip" onclick="filterCategory('Books', this)">üìö Books</div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">
                <h2 class="section-title">Featured Products</h2>
                <a href="#" class="see-all">See All ‚Üí</a>
            </div>
            <div class="products-grid" id="productsGrid"></div>
        </div>
    </div>

    <!-- CATEGORIES PAGE -->
    <div id="categoriesPage" class="page">
        <div class="page-header">
            <h1 class="page-title">Categories</h1>
            <p class="page-subtitle">Shop by department</p>
        </div>
        <div class="categories-page">
            <div class="category-grid" id="mainCategoryGrid">
                <div class="category-card-large electronics" onclick="showSubcategories('Electronics')">
                    <span class="category-icon-large">üì±</span>
                    <div class="category-name">Electronics</div>
                    <div class="category-count">6 products</div>
                    <div class="category-badge">Hot</div>
                </div>
                <div class="category-card-large fashion" onclick="showSubcategories('Fashion')">
                    <span class="category-icon-large">üëó</span>
                    <div class="category-name">Fashion</div>
                    <div class="category-count">6 products</div>
                </div>
                <div class="category-card-large home" onclick="showSubcategories('Home')">
                    <span class="category-icon-large">üè†</span>
                    <div class="category-name">Home & Kitchen</div>
                    <div class="category-count">6 products</div>
                    <div class="category-badge">New</div>
                </div>
                <div class="category-card-large beauty" onclick="showSubcategories('Beauty')">
                    <span class="category-icon-large">üíÑ</span>
                    <div class="category-name">Beauty</div>
                    <div class="category-count">4 products</div>
                </div>
                <div class="category-card-large sports" onclick="showSubcategories('Sports')">
                    <span class="category-icon-large">‚öΩ</span>
                    <div class="category-name">Sports</div>
                    <div class="category-count">4 products</div>
                </div>
                <div class="category-card-large books" onclick="showSubcategories('Books')">
                    <span class="category-icon-large">üìö</span>
                    <div class="category-name">Books</div>
                    <div class="category-count">2 products</div>
                </div>
            </div>

            <!-- Subcategories View (hidden by default) -->
            <div id="subcategoriesView" style="display: none;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                    <button class="back-btn-simple" onclick="hideSubcategories()">‚Üê</button>
                    <div>
                        <h2 class="section-title" id="subcategoryTitle" style="margin: 0; border: none;">Category</h2>
                        <p class="page-subtitle" id="subcategoryCount">Select a subcategory</p>
                    </div>
                </div>
                <div class="subcategory-list" id="subcategoryList"></div>
                <div class="products-grid" id="subcategoryProductsGrid"></div>
            </div>
        </div>
    </div>

    <!-- SEARCH PAGE -->
    <div id="searchPage" class="page">
        <div class="search-page">
            <div class="search-filters">
                <div class="filter-chip active">All</div>
                <div class="filter-chip">Price: Low to High</div>
                <div class="filter-chip">Price: High to Low</div>
                <div class="filter-chip">Rating</div>
                <div class="filter-chip">New Arrivals</div>
            </div>
            <div class="search-results" id="searchResults">Showing all products</div>
            <div class="products-grid" id="searchGrid"></div>
        </div>
    </div>

    <!-- CART PAGE -->
    <div id="cartPage" class="page">
        <div class="page-header">
            <h1 class="page-title">Shopping Cart</h1>
            <p class="page-subtitle" id="cartItemCount">0 items</p>
        </div>
        <div class="cart-list" id="cartList"></div>
        <div class="cart-summary" id="cartSummary" style="display: none;">
            <div class="summary-row">
                <span>Subtotal</span>
                <span id="subtotal">$0</span>
            </div>
            <div class="summary-row">
                <span>Shipping</span>
                <span id="shipping">Free</span>
            </div>
            <div class="summary-row total">
                <span>Total</span>
                <span id="cartTotal">$0</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <!-- ACCOUNT PAGE -->
    <div id="accountPage" class="page">
        <div class="account-header">
            <div class="avatar">üë§</div>
            <div class="user-name">John Doe</div>
            <div class="user-email">john.doe@email.com</div>
        </div>

        <div class="menu-list">
            <div class="menu-item" onclick="navigateTo('orders')">
                <div class="menu-icon">üì¶</div>
                <div class="menu-text">
                    <div class="menu-title">My Orders</div>
                    <div class="menu-subtitle">Track and manage orders</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>

            <div class="menu-item" onclick="navigateTo('wishlist')">
                <div class="menu-icon">‚ù§Ô∏è</div>
                <div class="menu-text">
                    <div class="menu-title">Wishlist</div>
                    <div class="menu-subtitle">Save your favorite items</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>

            <div class="menu-item">
                <div class="menu-icon">üìç</div>
                <div class="menu-text">
                    <div class="menu-title">Addresses</div>
                    <div class="menu-subtitle">Manage delivery addresses</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>

            <div class="menu-item">
                <div class="menu-icon">üí≥</div>
                <div class="menu-text">
                    <div class="menu-title">Payment Methods</div>
                    <div class="menu-subtitle">Manage your cards</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>

            <div class="menu-item">
                <div class="menu-icon">üîî</div>
                <div class="menu-text">
                    <div class="menu-title">Notifications</div>
                    <div class="menu-subtitle">Manage notifications</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>

            <div class="menu-item">
                <div class="menu-icon">‚öôÔ∏è</div>
                <div class="menu-text">
                    <div class="menu-title">Settings</div>
                    <div class="menu-subtitle">App preferences</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>

            <div class="menu-item">
                <div class="menu-icon">‚ùì</div>
                <div class="menu-text">
                    <div class="menu-title">Help & Support</div>
                    <div class="menu-subtitle">Get help and contact us</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>

            <div class="menu-item" onclick="logout()">
                <div class="menu-icon">üö™</div>
                <div class="menu-text">
                    <div class="menu-title">Logout</div>
                    <div class="menu-subtitle">Sign out from your account</div>
                </div>
                <div class="menu-arrow">‚Ä∫</div>
            </div>
        </div>
    </div>

    <!-- ORDERS PAGE -->
    <div id="ordersPage" class="page">
        <div class="page-header">
            <h1 class="page-title">My Orders</h1>
            <p class="page-subtitle">Track your purchases</p>
        </div>
        <div class="content-padding" id="ordersList"></div>
    </div>

    <!-- NOTIFICATIONS PAGE -->
    <div id="notificationsPage" class="page">
        <div class="page-header">
            <h1 class="page-title">Notifications</h1>
            <p class="page-subtitle">Stay updated</p>
        </div>
        <div class="content-padding" id="notificationsList"></div>
    </div>

    <!-- WISHLIST PAGE -->
    <div id="wishlistPage" class="page">
        <div class="page-header">
            <h1 class="page-title">Wishlist</h1>
            <p class="page-subtitle" id="wishlistCount">0 items</p>
        </div>
        <div class="content-padding">
            <div class="products-grid" id="wishlistGrid"></div>
        </div>
    </div>

    <!-- PRODUCT DETAIL PAGE -->
    <div id="productDetailPage" class="page">
        <div class="product-detail" id="productDetailContent"></div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="navigateTo('home')">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">Home</span>
        </div>
        <div class="nav-item" onclick="navigateTo('categories')">
            <span class="nav-icon">üìÇ</span>
            <span class="nav-label">Categories</span>
        </div>
        <div class="nav-item" onclick="navigateTo('cart')">
            <span class="nav-icon">üõí</span>
            <span class="nav-label">Cart</span>
        </div>
        <div class="nav-item" onclick="navigateTo('account')">
            <span class="nav-icon">üë§</span>
            <span class="nav-label">Account</span>
        </div>
    </nav>

    <!-- Floating Chat Button -->
    <button class="chat-fab" id="chatFab" onclick="openChat()">üí¨</button>

    <!-- Chat Interface -->
    <div class="chat-overlay" id="chatOverlay" onclick="closeChat()"></div>
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <div class="chat-avatar">ü§ñ</div>
            <div class="chat-header-info">
                <div class="chat-header-title">Armstr Support</div>
                <div class="chat-header-status">‚óè Online</div>
            </div>
            <button class="chat-close" onclick="closeChat()">‚úï</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message">
                <div class="chat-message-avatar">ü§ñ</div>
                <div>
                    <div class="chat-message-bubble">
                        <div class="chat-message-text">Hi! üëã Welcome to Armstr! How can I help you today?</div>
                    </div>
                    <div class="chat-message-time">Just now</div>
                </div>
            </div>
        </div>
        <div class="chat-input-container">
            <div class="quick-replies" id="quickReplies">
                <div class="quick-reply" onclick="sendQuickReply('Track my order')">üì¶ Track Order</div>
                <div class="quick-reply" onclick="sendQuickReply('Help with payment')">üí≥ Payment Help</div>
                <div class="quick-reply" onclick="sendQuickReply('Return item')">üîÑ Returns</div>
            </div>
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type a message..." onkeypress="handleChatEnter(event)">
                <button class="chat-send" id="chatSend" onclick="sendMessage()">‚û§</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>
</div>

<script>
    // Product Data
    const products = [
        { id: 1, name: 'iPhone 15 Pro Max', category: 'Electronics', price: 1299, oldPrice: 1499, discount: 13, icon: 'üì±', rating: 4.8, reviews: 256 },
        { id: 2, name: 'Samsung Galaxy S24', category: 'Electronics', price: 1199, oldPrice: 1399, discount: 14, icon: 'üì±', rating: 4.7, reviews: 189 },
        { id: 3, name: 'MacBook Air M3', category: 'Electronics', price: 1499, oldPrice: 1699, discount: 12, icon: 'üíª', rating: 4.9, reviews: 432 },
        { id: 4, name: 'Sony WH-1000XM5', category: 'Electronics', price: 349, oldPrice: 399, discount: 13, icon: 'üéß', rating: 4.8, reviews: 567 },
        { id: 5, name: 'LG 55" OLED TV', category: 'Electronics', price: 1299, oldPrice: 1599, discount: 19, icon: 'üì∫', rating: 4.6, reviews: 234 },
        { id: 6, name: 'Canon EOS R6', category: 'Electronics', price: 2499, oldPrice: 2799, discount: 11, icon: 'üì∑', rating: 4.9, reviews: 145 },
        { id: 7, name: 'Nike Air Max 2024', category: 'Fashion', price: 159, oldPrice: 199, discount: 20, icon: 'üëü', rating: 4.5, reviews: 389 },
        { id: 8, name: 'Adidas Jacket', category: 'Fashion', price: 89, oldPrice: 129, discount: 31, icon: 'üß•', rating: 4.4, reviews: 167 },
        { id: 9, name: 'Levi\'s 501 Jeans', category: 'Fashion', price: 79, oldPrice: 99, discount: 20, icon: 'üëñ', rating: 4.6, reviews: 523 },
        { id: 10, name: 'Ray-Ban Aviator', category: 'Fashion', price: 149, oldPrice: 189, discount: 21, icon: 'üï∂Ô∏è', rating: 4.7, reviews: 298 },
        { id: 11, name: 'Gucci Handbag', category: 'Fashion', price: 1299, oldPrice: 1599, discount: 19, icon: 'üëú', rating: 4.8, reviews: 89 },
        { id: 12, name: 'Rolex Watch', category: 'Fashion', price: 8999, oldPrice: 9999, discount: 10, icon: '‚åö', rating: 5.0, reviews: 45 },
        { id: 13, name: 'KitchenAid Mixer', category: 'Home', price: 349, oldPrice: 449, discount: 22, icon: 'üçΩÔ∏è', rating: 4.8, reviews: 678 },
        { id: 14, name: 'Dyson V15 Vacuum', category: 'Home', price: 699, oldPrice: 799, discount: 13, icon: 'üè†', rating: 4.7, reviews: 445 },
        { id: 15, name: 'Nespresso Machine', category: 'Home', price: 299, oldPrice: 379, discount: 21, icon: '‚òï', rating: 4.6, reviews: 892 },
        { id: 16, name: 'iRobot Roomba', category: 'Home', price: 499, oldPrice: 649, discount: 23, icon: 'ü§ñ', rating: 4.5, reviews: 734 },
        { id: 17, name: 'Le Creuset Set', category: 'Home', price: 399, oldPrice: 499, discount: 20, icon: 'üç≥', rating: 4.9, reviews: 234 },
        { id: 18, name: 'Philips Air Fryer', category: 'Home', price: 249, oldPrice: 299, discount: 17, icon: 'üçü', rating: 4.7, reviews: 567 },
        { id: 19, name: 'Est√©e Lauder Set', category: 'Beauty', price: 129, oldPrice: 169, discount: 24, icon: 'üíÑ', rating: 4.6, reviews: 456 },
        { id: 20, name: 'MAC Makeup Kit', category: 'Beauty', price: 89, oldPrice: 119, discount: 25, icon: 'üíÖ', rating: 4.7, reviews: 389 },
        { id: 21, name: 'Olay Regenerist', category: 'Beauty', price: 39, oldPrice: 49, discount: 20, icon: 'üß¥', rating: 4.5, reviews: 678 },
        { id: 22, name: 'Dyson Airwrap', category: 'Beauty', price: 549, oldPrice: 649, discount: 15, icon: 'üíá', rating: 4.8, reviews: 234 },
        { id: 23, name: 'Peloton Bike+', category: 'Sports', price: 2495, oldPrice: 2795, discount: 11, icon: 'üö¥', rating: 4.9, reviews: 156 },
        { id: 24, name: 'Wilson Tennis Racket', category: 'Sports', price: 199, oldPrice: 249, discount: 20, icon: 'üéæ', rating: 4.6, reviews: 234 },
        { id: 25, name: 'Yoga Mat Set', category: 'Sports', price: 49, oldPrice: 69, discount: 29, icon: 'üßò', rating: 4.5, reviews: 567 },
        { id: 26, name: 'Bowflex Dumbbells', category: 'Sports', price: 349, oldPrice: 449, discount: 22, icon: 'üèãÔ∏è', rating: 4.7, reviews: 345 },
        { id: 27, name: 'Harry Potter Set', category: 'Books', price: 79, oldPrice: 99, discount: 20, icon: 'üìö', rating: 4.9, reviews: 892 },
        { id: 28, name: 'Atomic Habits', category: 'Books', price: 16, oldPrice: 20, discount: 20, icon: 'üìñ', rating: 4.8, reviews: 1234 },
    ];

    // Interactive Guide State
    let hasSeenGuide = localStorage.getItem('armstr_guide_seen') === 'true';
    let currentGuideStep = 0;
    
    const guideSteps = [
        {
            target: '.logo',
            title: 'Welcome to Armstr! üëã',
            description: 'Your one-stop shop for amazing products at great prices. Let\'s show you around!',
            position: 'bottom'
        },
        {
            target: '.search-container',
            title: 'Search Products üîç',
            description: 'Find exactly what you need by searching for products, brands, or categories.',
            position: 'bottom'
        },
        {
            target: '.nav-item:nth-child(2)',
            title: 'Browse Categories üìÇ',
            description: 'Explore products organized by categories and subcategories for easy shopping.',
            position: 'top'
        },
        {
            target: '.nav-item:nth-child(3)',
            title: 'Your Cart üõí',
            description: 'View items you\'ve added, adjust quantities, and proceed to checkout.',
            position: 'top'
        },
        {
            target: '.nav-item:nth-child(4)',
            title: 'Your Account üë§',
            description: 'Access your orders, wishlist, settings, and more from your account page.',
            position: 'top'
        },
        {
            target: '.promo-carousel',
            title: 'Special Offers üéâ',
            description: 'Check out our latest deals, flash sales, and promotions right here!',
            position: 'bottom'
        }
    ];

    // State
    let cart = JSON.parse(localStorage.getItem('armstr_cart')) || [];
    let wishlist = JSON.parse(localStorage.getItem('armstr_wishlist')) || [];
    let currentFilter = 'all';
    let currentPage = 'home';
    let currentCategory = null;
    let currentSubcategory = null;

    // Subcategories data
    const subcategories = {
        Electronics: [
            { id: 'phones', name: 'Smartphones', icon: 'üì±', count: 2 },
            { id: 'computers', name: 'Computers & Laptops', icon: 'üíª', count: 1 },
            { id: 'audio', name: 'Audio & Headphones', icon: 'üéß', count: 1 },
            { id: 'tv', name: 'TVs & Home Theater', icon: 'üì∫', count: 1 },
            { id: 'cameras', name: 'Cameras & Photography', icon: 'üì∑', count: 1 }
        ],
        Fashion: [
            { id: 'shoes', name: 'Shoes & Sneakers', icon: 'üëü', count: 1 },
            { id: 'clothing', name: 'Clothing & Apparel', icon: 'üß•', count: 2 },
            { id: 'accessories', name: 'Accessories', icon: 'üï∂Ô∏è', count: 2 },
            { id: 'watches', name: 'Watches & Jewelry', icon: '‚åö', count: 1 }
        ],
        Home: [
            { id: 'kitchen', name: 'Kitchen Appliances', icon: 'üçΩÔ∏è', count: 2 },
            { id: 'cleaning', name: 'Cleaning & Vacuums', icon: 'üè†', count: 2 },
            { id: 'coffee', name: 'Coffee & Beverages', icon: '‚òï', count: 1 },
            { id: 'cooking', name: 'Cookware & Dining', icon: 'üç≥', count: 1 }
        ],
        Beauty: [
            { id: 'makeup', name: 'Makeup & Cosmetics', icon: 'üíÑ', count: 2 },
            { id: 'skincare', name: 'Skincare', icon: 'üß¥', count: 1 },
            { id: 'hair', name: 'Hair Care & Styling', icon: 'üíá', count: 1 }
        ],
        Sports: [
            { id: 'fitness', name: 'Fitness Equipment', icon: 'üèãÔ∏è', count: 2 },
            { id: 'outdoor', name: 'Outdoor Sports', icon: 'üéæ', count: 1 },
            { id: 'yoga', name: 'Yoga & Pilates', icon: 'üßò', count: 1 }
        ],
        Books: [
            { id: 'fiction', name: 'Fiction & Literature', icon: 'üìö', count: 1 },
            { id: 'nonfiction', name: 'Self-Help & Business', icon: 'üìñ', count: 1 }
        ]
    };

    // Product to subcategory mapping
    const productSubcategories = {
        1: 'phones', 2: 'phones', 3: 'computers', 4: 'audio', 5: 'tv', 6: 'cameras',
        7: 'shoes', 8: 'clothing', 9: 'clothing', 10: 'accessories', 11: 'accessories', 12: 'watches',
        13: 'kitchen', 14: 'cleaning', 15: 'coffee', 16: 'cleaning', 17: 'cooking', 18: 'kitchen',
        19: 'makeup', 20: 'makeup', 21: 'skincare', 22: 'hair',
        23: 'fitness', 24: 'outdoor', 25: 'yoga', 26: 'fitness',
        27: 'fiction', 28: 'nonfiction'
    };

    const orders = [
        { 
            id: 'ORD-2024-001', 
            date: 'Dec 10, 2024', 
            status: 'delivered', 
            items: [
                {name: 'iPhone 15 Pro Max', qty: 1, price: 1299},
                {name: 'Sony WH-1000XM5', qty: 1, price: 349}
            ], 
            subtotal: 1648,
            shipping: 0,
            total: 1648 
        },
        { 
            id: 'ORD-2024-002', 
            date: 'Dec 12, 2024', 
            status: 'processing', 
            items: [
                {name: 'Nike Air Max 2024', qty: 2, price: 159},
                {name: "Levi's 501 Jeans", qty: 1, price: 79},
                {name: 'Ray-Ban Aviator', qty: 1, price: 149}
            ], 
            subtotal: 546,
            shipping: 0,
            total: 546 
        },
        { 
            id: 'ORD-2024-003', 
            date: 'Dec 14, 2024', 
            status: 'delivered', 
            items: [
                {name: 'MacBook Air M3', qty: 1, price: 1499},
                {name: 'Magic Mouse', qty: 1, price: 79},
                {name: 'USB-C Cable', qty: 2, price: 19}
            ], 
            subtotal: 1616,
            shipping: 0,
            total: 1616 
        },
        { 
            id: 'ORD-2024-004', 
            date: 'Dec 8, 2024', 
            status: 'delivered', 
            items: [
                {name: 'KitchenAid Mixer', qty: 1, price: 349},
                {name: 'Nespresso Machine', qty: 1, price: 299},
                {name: 'Le Creuset Set', qty: 1, price: 399}
            ], 
            subtotal: 1047,
            shipping: 0,
            total: 1047 
        },
        { 
            id: 'ORD-2024-005', 
            date: 'Dec 5, 2024', 
            status: 'shipped', 
            items: [
                {name: 'Peloton Bike+', qty: 1, price: 2495}
            ], 
            subtotal: 2495,
            shipping: 0,
            total: 2495 
        }
    ];

    const notifications = [
        { id: 1, type: 'order', icon: 'üì¶', title: 'Order Delivered', text: 'Your order ORD-2024-001 has been delivered', time: '2 hours ago', unread: true },
        { id: 2, type: 'promo', icon: 'üéâ', title: 'Flash Sale Alert', text: 'Up to 70% off on electronics. Limited time only!', time: '5 hours ago', unread: true },
        { id: 3, type: 'order', icon: 'üöö', title: 'Order Shipped', text: 'Your order ORD-2024-002 is on the way', time: '1 day ago', unread: true },
        { id: 4, type: 'promo', icon: 'üíù', title: 'New Arrival', text: 'Check out our latest fashion collection', time: '2 days ago', unread: false }
    ];

    // Interactive Guide Functions
    function startGuide() {
        currentGuideStep = 0;
        document.getElementById('guideOverlay').classList.add('active');
        showGuideStep(currentGuideStep);
    }

    function showGuideStep(stepIndex) {
        if (stepIndex >= guideSteps.length) {
            completeGuide();
            return;
        }

        const step = guideSteps[stepIndex];
        const targetElement = document.querySelector(step.target);
        
        if (!targetElement) {
            // Skip to next if element not found
            currentGuideStep++;
            showGuideStep(currentGuideStep);
            return;
        }

        const spotlight = document.getElementById('guideSpotlight');
        const tooltip = document.getElementById('guideTooltip');
        const backdrop = document.querySelector('.guide-backdrop');
        const rect = targetElement.getBoundingClientRect();

        // Position spotlight around target element
        const padding = 8;
        spotlight.style.top = `${rect.top - padding}px`;
        spotlight.style.left = `${rect.left - padding}px`;
        spotlight.style.width = `${rect.width + padding * 2}px`;
        spotlight.style.height = `${rect.height + padding * 2}px`;

        // Make the backdrop not block clicks on the highlighted element
        // by creating a cutout effect with clip-path
        const spotX = rect.left - padding;
        const spotY = rect.top - padding;
        const spotW = rect.width + padding * 2;
        const spotH = rect.height + padding * 2;
        
        backdrop.style.clipPath = `polygon(
            0 0, 
            100% 0, 
            100% 100%, 
            0 100%, 
            0 0,
            ${spotX}px ${spotY}px,
            ${spotX}px ${spotY + spotH}px,
            ${spotX + spotW}px ${spotY + spotH}px,
            ${spotX + spotW}px ${spotY}px,
            ${spotX}px ${spotY}px
        )`;

        // Update tooltip content
        document.getElementById('guideStepCounter').textContent = `${stepIndex + 1} of ${guideSteps.length}`;
        document.getElementById('guideTitle').textContent = step.title;
        document.getElementById('guideDescription').textContent = step.description;

        // Position tooltip
        positionTooltip(tooltip, rect, step.position);

        // Update button text
        const nextBtn = tooltip.querySelector('.guide-next');
        nextBtn.textContent = stepIndex === guideSteps.length - 1 ? 'Finish' : 'Next';
    }

    function positionTooltip(tooltip, targetRect, position) {
        tooltip.className = 'guide-tooltip';
        const tooltipRect = tooltip.getBoundingClientRect();
        const padding = 20;

        switch (position) {
            case 'bottom':
                tooltip.style.top = `${targetRect.bottom + padding}px`;
                tooltip.style.left = `${Math.max(20, Math.min(window.innerWidth - tooltipRect.width - 20, targetRect.left + targetRect.width / 2 - tooltipRect.width / 2))}px`;
                tooltip.classList.add('arrow-top');
                break;
            case 'top':
                tooltip.style.top = `${targetRect.top - tooltipRect.height - padding}px`;
                tooltip.style.left = `${Math.max(20, Math.min(window.innerWidth - tooltipRect.width - 20, targetRect.left + targetRect.width / 2 - tooltipRect.width / 2))}px`;
                tooltip.classList.add('arrow-bottom');
                break;
            case 'left':
                tooltip.style.top = `${targetRect.top + targetRect.height / 2 - tooltipRect.height / 2}px`;
                tooltip.style.left = `${targetRect.left - tooltipRect.width - padding}px`;
                tooltip.classList.add('arrow-right');
                break;
            case 'right':
                tooltip.style.top = `${targetRect.top + targetRect.height / 2 - tooltipRect.height / 2}px`;
                tooltip.style.left = `${targetRect.right + padding}px`;
                tooltip.classList.add('arrow-left');
                break;
        }
    }

    function nextGuideStep() {
        currentGuideStep++;
        if (currentGuideStep < guideSteps.length) {
            showGuideStep(currentGuideStep);
        } else {
            completeGuide();
        }
    }

    function skipGuide() {
        completeGuide();
    }

    function completeGuide() {
        document.getElementById('guideOverlay').classList.remove('active');
        localStorage.setItem('armstr_guide_seen', 'true');
        hasSeenGuide = true;
        showToast('Tour completed! Happy shopping! üéâ');
    }

    // Navigation
    function navigateTo(page) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
        
        currentPage = page;
        
        // Update header style based on page
        updateHeaderStyle(page);
        
        // Update chat FAB visibility
        updateChatFabVisibility();
        
        switch(page) {
            case 'home':
                document.getElementById('homePage').classList.add('active');
                document.querySelector('.nav-item:nth-child(1)').classList.add('active');
                break;
            case 'categories':
                document.getElementById('categoriesPage').classList.add('active');
                document.querySelector('.nav-item:nth-child(2)').classList.add('active');
                // Reset to main categories view
                hideSubcategories();
                break;
            case 'search':
                document.getElementById('searchPage').classList.add('active');
                renderSearchGrid();
                break;
            case 'cart':
                document.getElementById('cartPage').classList.add('active');
                document.querySelector('.nav-item:nth-child(3)').classList.add('active');
                renderCart();
                break;
            case 'account':
                document.getElementById('accountPage').classList.add('active');
                document.querySelector('.nav-item:nth-child(4)').classList.add('active');
                break;
            case 'orders':
                document.getElementById('ordersPage').classList.add('active');
                renderOrders();
                break;
            case 'notifications':
                document.getElementById('notificationsPage').classList.add('active');
                renderNotifications();
                break;
            case 'wishlist':
                document.getElementById('wishlistPage').classList.add('active');
                renderWishlist();
                break;
            case 'productDetail':
                document.getElementById('productDetailPage').classList.add('active');
                break;
        }
    }

    // Update header style based on page
    function updateHeaderStyle(page) {
        const header = document.getElementById('appHeader');
        const searchBtn = document.getElementById('searchBtn');
        
        if (page === 'home') {
            // Full header with search bar on home page
            header.classList.remove('compact');
            header.classList.remove('search-active');
            searchBtn.style.display = 'none';
        } else {
            // Compact header with search button on other pages
            header.classList.add('compact');
            searchBtn.style.display = 'flex';
        }
    }

    // Expand search bar
    function expandSearch() {
        const header = document.getElementById('appHeader');
        const searchInput = document.getElementById('searchInput');
        const searchClose = document.getElementById('searchClose');
        
        header.classList.add('search-active');
        searchClose.style.display = 'flex';
        
        // Focus input and show keyboard
        setTimeout(() => {
            searchInput.focus();
        }, 300);
    }

    // Collapse search bar
    function collapseSearch() {
        const header = document.getElementById('appHeader');
        const searchInput = document.getElementById('searchInput');
        const searchClose = document.getElementById('searchClose');
        
        header.classList.remove('search-active');
        searchClose.style.display = 'none';
        searchInput.value = '';
        searchInput.blur();
        
        // Reset search if on search page
        if (currentPage === 'search') {
            renderSearchGrid(products);
            document.getElementById('searchResults').textContent = 'Showing all products';
        }
    }

    // Category & Subcategory Functions
    function showSubcategories(category) {
        currentCategory = category;
        currentSubcategory = null;
        
        const mainGrid = document.getElementById('mainCategoryGrid');
        const subcatView = document.getElementById('subcategoriesView');
        const subcatList = document.getElementById('subcategoryList');
        const title = document.getElementById('subcategoryTitle');
        const count = document.getElementById('subcategoryCount');
        
        // Hide main grid, show subcategories
        mainGrid.style.display = 'none';
        subcatView.style.display = 'block';
        
        // Update header
        title.textContent = category;
        const categoryProducts = products.filter(p => p.category === category);
        count.textContent = `${categoryProducts.length} products available`;
        
        // Render subcategories
        subcatList.innerHTML = '';
        const subs = subcategories[category] || [];
        
        subs.forEach(sub => {
            const item = document.createElement('div');
            item.className = 'subcategory-item';
            item.onclick = () => selectSubcategory(sub.id, item);
            item.innerHTML = `
                <div class="subcategory-info">
                    <div class="subcategory-icon">${sub.icon}</div>
                    <div class="subcategory-text">
                        <div class="subcategory-name">${sub.name}</div>
                        <div class="subcategory-count">${sub.count} ${sub.count === 1 ? 'product' : 'products'}</div>
                    </div>
                </div>
                <div class="subcategory-arrow">‚Ä∫</div>
            `;
            subcatList.appendChild(item);
        });
        
        // Clear products initially
        document.getElementById('subcategoryProductsGrid').innerHTML = '';
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function hideSubcategories() {
        const mainGrid = document.getElementById('mainCategoryGrid');
        const subcatView = document.getElementById('subcategoriesView');
        
        mainGrid.style.display = 'grid';
        subcatView.style.display = 'none';
        
        currentCategory = null;
        currentSubcategory = null;
        
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function selectSubcategory(subcategoryId, element) {
        currentSubcategory = subcategoryId;
        
        // Update active state
        document.querySelectorAll('.subcategory-item').forEach(item => {
            item.classList.remove('active');
        });
        element.classList.add('active');
        
        // Filter and display products
        const filteredProducts = products.filter(p => 
            p.category === currentCategory && 
            productSubcategories[p.id] === subcategoryId
        );
        
        const grid = document.getElementById('subcategoryProductsGrid');
        grid.innerHTML = '';
        
        filteredProducts.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => showProductDetail(product.id);
            card.innerHTML = `
                <div class="product-image">
                    ${product.icon}
                    <div class="discount-badge">-${product.discount}%</div>
                </div>
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">$${product.price}</div>
                    <div class="product-old-price">$${product.oldPrice}</div>
                    <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart(${product.id})">Add to Cart</button>
                </div>
            `;
            grid.appendChild(card);
        });
        
        // Scroll to products
        setTimeout(() => {
            const productsSection = document.getElementById('subcategoryProductsGrid');
            productsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
        
        showToast(`Showing ${filteredProducts.length} products`);
    }

    // Display Products
    function displayProducts(productsToShow) {
        const grid = document.getElementById('productsGrid');
        grid.innerHTML = '';
        
        productsToShow.forEach((product, index) => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => showProductDetail(product.id);
            card.innerHTML = `
                <div class="product-image">
                    ${product.icon}
                    <div class="discount-badge">-${product.discount}%</div>
                </div>
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">$${product.price}</div>
                    <div class="product-old-price">$${product.oldPrice}</div>
                    <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart(${product.id})">Add to Cart</button>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // Filter Category
    function filterCategory(category, element) {
        currentFilter = category;
        document.querySelectorAll('.category-chip').forEach(chip => chip.classList.remove('active'));
        element.classList.add('active');
        
        const filtered = category === 'all' ? products : products.filter(p => p.category === category);
        displayProducts(filtered);
    }

    // Search
    function handleSearch() {
        const term = document.getElementById('searchInput').value.toLowerCase();
        const filtered = products.filter(p => 
            p.name.toLowerCase().includes(term) || 
            p.category.toLowerCase().includes(term)
        );
        
        // Navigate to search page if not already there and has input
        if (term && currentPage !== 'search') {
            navigateTo('search');
        }
        
        if (currentPage === 'search') {
            renderSearchGrid(filtered);
            document.getElementById('searchResults').textContent = 
                term ? `Showing ${filtered.length} ${filtered.length === 1 ? 'result' : 'results'}` : 'Showing all products';
        }
    }

    function renderSearchGrid(productsToShow = products) {
        const grid = document.getElementById('searchGrid');
        grid.innerHTML = '';
        
        productsToShow.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => showProductDetail(product.id);
            card.innerHTML = `
                <div class="product-image">
                    ${product.icon}
                    <div class="discount-badge">-${product.discount}%</div>
                </div>
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">$${product.price}</div>
                    <div class="product-old-price">$${product.oldPrice}</div>
                    <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart(${product.id})">Add to Cart</button>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // Product Detail
    let previousPage = 'home'; // Track where user came from

    function showProductDetail(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;
        
        // Remember current page before navigating
        previousPage = currentPage;
        
        const content = document.getElementById('productDetailContent');
        const isInWishlist = wishlist.some(item => item.id === productId);
        
        content.innerHTML = `
            <div class="product-detail-image">
                ${product.icon}
                <button class="back-btn" onclick="goBack()">‚Üê</button>
                <button class="wishlist-btn" onclick="toggleWishlist(${productId})">
                    ${isInWishlist ? '‚ù§Ô∏è' : 'ü§ç'}
                </button>
            </div>
            <div class="product-detail-content">
                <h1 class="detail-title">${product.name}</h1>
                <div class="detail-rating">
                    <span class="stars">‚≠ê ${product.rating}</span>
                    <span class="reviews">(${product.reviews} reviews)</span>
                </div>
                <div>
                    <span class="detail-price">$${product.price}</span>
                    <span class="detail-old-price">$${product.oldPrice}</span>
                    <span class="detail-discount">-${product.discount}%</span>
                </div>
                <div class="detail-section">
                    <h3 class="detail-section-title">Description</h3>
                    <p class="detail-description">
                        This premium ${product.category.toLowerCase()} product offers exceptional quality and performance. 
                        Perfect for everyday use with advanced features and modern design. 
                        Trusted by thousands of satisfied customers worldwide.
                    </p>
                </div>
                <div class="detail-section">
                    <h3 class="detail-section-title">Features</h3>
                    <p class="detail-description">
                        ‚Ä¢ Premium quality materials<br>
                        ‚Ä¢ Advanced technology<br>
                        ‚Ä¢ Durable and long-lasting<br>
                        ‚Ä¢ Easy to use<br>
                        ‚Ä¢ 1-year warranty included
                    </p>
                </div>
            </div>
            <div class="detail-actions">
                <button class="btn-secondary" onclick="toggleWishlist(${productId})">
                    ${isInWishlist ? 'Remove from Wishlist' : 'Add to Wishlist'}
                </button>
                <button class="btn-primary" onclick="addToCart(${productId}); showToast('Added to cart!'); setTimeout(() => goBack(), 800);">Add to Cart</button>
            </div>
        `;
        
        navigateTo('productDetail');
    }

    function goBack() {
        // Return to the page user came from
        navigateTo(previousPage);
    }

    // Cart Functions
    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        const existing = cart.find(item => item.id === productId);
        
        if (existing) {
            existing.quantity++;
        } else {
            cart.push({ ...product, quantity: 1 });
        }
        
        saveCart();
        updateCartBadge();
        showToast(`${product.name} added to cart!`);
    }

    function updateCartBadge() {
        const count = cart.reduce((sum, item) => sum + item.quantity, 0);
        document.getElementById('cartBadge').textContent = count;
    }

    function renderCart() {
        const list = document.getElementById('cartList');
        const summary = document.getElementById('cartSummary');
        
        if (cart.length === 0) {
            list.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">üõí</div>
                    <div class="empty-title">Your cart is empty</div>
                    <div class="empty-text">Add some products to get started</div>
                    <a href="#" class="empty-action" onclick="navigateTo('home'); return false;">Start Shopping</a>
                </div>
            `;
            summary.style.display = 'none';
            document.getElementById('cartItemCount').textContent = '0 items';
            return;
        }
        
        document.getElementById('cartItemCount').textContent = `${cart.length} ${cart.length === 1 ? 'item' : 'items'}`;
        
        list.innerHTML = '';
        let total = 0;
        
        cart.forEach(item => {
            total += item.price * item.quantity;
            const cartItem = document.createElement('div');
            cartItem.className = 'cart-item';
            cartItem.innerHTML = `
                <div class="cart-item-image">${item.icon}</div>
                <div class="cart-item-info">
                    <div class="cart-item-name">${item.name}</div>
                    <div class="cart-item-price">$${item.price}</div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">‚àí</button>
                        <span class="quantity-value">${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                        <span class="remove-btn" onclick="removeFromCart(${item.id})">Remove</span>
                    </div>
                </div>
            `;
            list.appendChild(cartItem);
        });
        
        document.getElementById('subtotal').textContent = `$${total}`;
        document.getElementById('cartTotal').textContent = `$${total}`;
        summary.style.display = 'block';
    }

    function updateQuantity(productId, change) {
        const item = cart.find(i => i.id === productId);
        if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
                removeFromCart(productId);
            } else {
                saveCart();
                updateCartBadge();
                renderCart();
            }
        }
    }

    function removeFromCart(productId) {
        cart = cart.filter(item => item.id !== productId);
        saveCart();
        updateCartBadge();
        renderCart();
        showToast('Item removed from cart');
    }

    function saveCart() {
        localStorage.setItem('armstr_cart', JSON.stringify(cart));
    }

    function checkout() {
        if (cart.length === 0) {
            showToast('Your cart is empty!');
            return;
        }
        showToast('Order placed successfully! üéâ');
        setTimeout(() => {
            cart = [];
            saveCart();
            updateCartBadge();
            renderCart();
        }, 1500);
    }

    // Wishlist
    function toggleWishlist(productId) {
        const product = products.find(p => p.id === productId);
        const index = wishlist.findIndex(item => item.id === productId);
        
        if (index > -1) {
            wishlist.splice(index, 1);
            showToast('Removed from wishlist');
        } else {
            wishlist.push(product);
            showToast('Added to wishlist ‚ù§Ô∏è');
        }
        
        localStorage.setItem('armstr_wishlist', JSON.stringify(wishlist));
        
        if (currentPage === 'productDetail') {
            showProductDetail(productId);
        } else if (currentPage === 'wishlist') {
            renderWishlist();
        }
    }

    function renderWishlist() {
        const grid = document.getElementById('wishlistGrid');
        document.getElementById('wishlistCount').textContent = `${wishlist.length} ${wishlist.length === 1 ? 'item' : 'items'}`;
        
        if (wishlist.length === 0) {
            grid.innerHTML = `
                <div class="empty-state" style="grid-column: 1 / -1;">
                    <div class="empty-icon">‚ù§Ô∏è</div>
                    <div class="empty-title">No favorites yet</div>
                    <div class="empty-text">Save items you love to find them later</div>
                    <a href="#" class="empty-action" onclick="navigateTo('home'); return false;">Browse Products</a>
                </div>
            `;
            return;
        }
        
        grid.innerHTML = '';
        wishlist.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.onclick = () => showProductDetail(product.id);
            card.innerHTML = `
                <div class="product-image">
                    ${product.icon}
                    <div class="discount-badge">-${product.discount}%</div>
                </div>
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">$${product.price}</div>
                    <div class="product-old-price">$${product.oldPrice}</div>
                    <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart(${product.id})">Add to Cart</button>
                </div>
            `;
            grid.appendChild(card);
        });
    }

    // Orders
    function renderOrders() {
        const list = document.getElementById('ordersList');
        
        if (orders.length === 0) {
            list.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">üì¶</div>
                    <div class="empty-title">No orders yet</div>
                    <div class="empty-text">Start shopping to see your orders here</div>
                    <a href="#" class="empty-action" onclick="navigateTo('home'); return false;">Start Shopping</a>
                </div>
            `;
            return;
        }
        
        list.innerHTML = '';
        orders.forEach(order => {
            const card = document.createElement('div');
            card.className = 'order-card';
            
            // Calculate total items
            const totalItems = order.items.reduce((sum, item) => sum + item.qty, 0);
            
            // Build clickable order items
            const orderItemsHTML = order.items.map(item => {
                // Find the actual product to get its ID
                const product = products.find(p => p.name === item.name);
                const productId = product ? product.id : null;
                
                return `
                    <div class="order-item-row ${productId ? 'order-item-clickable' : ''}" ${productId ? `onclick="showProductDetail(${productId})"` : ''}>
                        <span>${item.name}${item.qty > 1 ? ` √ó ${item.qty}` : ''}</span>
                        <span>$${item.qty > 1 ? (item.price * item.qty) : item.price}</span>
                    </div>
                `;
            }).join('');
            
            card.innerHTML = `
                <div class="order-header">
                    <div>
                        <div class="order-number">${order.id}</div>
                        <div class="order-date">${order.date}</div>
                    </div>
                    <div class="order-status ${order.status}">${order.status}</div>
                </div>
                <div class="order-items">
                    ${orderItemsHTML}
                    ${order.items.length > 1 ? `
                        <div class="order-item-row" style="margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border); font-size: 12px; color: var(--text-secondary);">
                            <span>${totalItems} ${totalItems === 1 ? 'item' : 'items'} ‚Ä¢ Subtotal</span>
                            <span>$${order.subtotal}</span>
                        </div>
                    ` : ''}
                </div>
                <div class="order-total">Total: $${order.total}</div>
            `;
            list.appendChild(card);
        });
    }

    // Notifications
    function renderNotifications() {
        const list = document.getElementById('notificationsList');
        
        list.innerHTML = '';
        notifications.forEach(notif => {
            const card = document.createElement('div');
            card.className = `notification-card ${notif.unread ? 'unread' : ''}`;
            card.innerHTML = `
                <div class="notification-icon ${notif.type}">
                    ${notif.icon}
                </div>
                <div class="notification-content">
                    <div class="notification-title">${notif.title}</div>
                    <div class="notification-text">${notif.text}</div>
                    <div class="notification-time">${notif.time}</div>
                </div>
            `;
            list.appendChild(card);
        });
    }

    // Toast
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.classList.add('show');
        setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // Logout
    function logout() {
        if (confirm('Are you sure you want to logout?')) {
            showToast('Logged out successfully');
            cart = [];
            wishlist = [];
            saveCart();
            localStorage.setItem('armstr_wishlist', JSON.stringify(wishlist));
            navigateTo('home');
        }
    }

    // Chat Functions
    let chatOpen = false;

    function openChat() {
        chatOpen = true;
        document.getElementById('chatOverlay').classList.add('active');
        document.getElementById('chatContainer').classList.add('active');
        document.getElementById('chatFab').classList.add('hidden');
        // Removed auto-focus to prevent keyboard from showing automatically
    }

    function closeChat() {
        chatOpen = false;
        document.getElementById('chatOverlay').classList.remove('active');
        document.getElementById('chatContainer').classList.remove('active');
        document.getElementById('chatFab').classList.remove('hidden');
    }

    function sendMessage() {
        const input = document.getElementById('chatInput');
        const message = input.value.trim();
        
        if (!message) return;
        
        // Add user message
        addChatMessage(message, 'user');
        input.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        // Simulate bot response
        setTimeout(() => {
            hideTypingIndicator();
            respondToMessage(message);
        }, 1000 + Math.random() * 1000);
    }

    function addChatMessage(text, sender = 'bot') {
        const messagesContainer = document.getElementById('chatMessages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `chat-message ${sender}`;
        
        const time = new Date().toLocaleTimeString('en-US', { 
            hour: 'numeric', 
            minute: '2-digit',
            hour12: true 
        });
        
        messageDiv.innerHTML = `
            <div class="chat-message-avatar">${sender === 'user' ? 'üë§' : 'ü§ñ'}</div>
            <div>
                <div class="chat-message-bubble">
                    <div class="chat-message-text">${text}</div>
                </div>
                <div class="chat-message-time">${time}</div>
            </div>
        `;
        
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function showTypingIndicator() {
        const messagesContainer = document.getElementById('chatMessages');
        const typingDiv = document.createElement('div');
        typingDiv.className = 'chat-message';
        typingDiv.id = 'typingIndicator';
        typingDiv.innerHTML = `
            <div class="chat-message-avatar">ü§ñ</div>
            <div class="chat-message-bubble">
                <div class="chat-typing">
                    <div class="chat-typing-dot"></div>
                    <div class="chat-typing-dot"></div>
                    <div class="chat-typing-dot"></div>
                </div>
            </div>
        `;
        messagesContainer.appendChild(typingDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function hideTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        if (indicator) indicator.remove();
    }

    function respondToMessage(message) {
        const lowerMessage = message.toLowerCase();
        let response = '';
        
        if (lowerMessage.includes('track') || lowerMessage.includes('order')) {
            response = 'You can track your orders by going to Account ‚Üí My Orders. Each order shows its current status. Would you like me to take you there?';
        } else if (lowerMessage.includes('payment') || lowerMessage.includes('pay')) {
            response = 'We accept credit cards, PayPal, bank transfers, and cash on delivery. All transactions are secure and encrypted. Do you need help with a specific payment method?';
        } else if (lowerMessage.includes('return') || lowerMessage.includes('refund')) {
            response = 'Returns are accepted within 30 days of delivery. Go to Account ‚Üí My Orders, select the item, and click "Return Item". Full refunds are processed within 5-7 business days. üîÑ';
        } else if (lowerMessage.includes('shipping') || lowerMessage.includes('delivery')) {
            response = 'Free shipping on orders over $50! Standard delivery takes 3-5 business days. Express shipping (1-2 days) is available for an additional fee. üöö';
        } else if (lowerMessage.includes('help') || lowerMessage.includes('support')) {
            response = 'I\'m here to help! You can ask me about orders, payments, returns, shipping, or product information. What would you like to know?';
        } else if (lowerMessage.includes('hi') || lowerMessage.includes('hello')) {
            response = 'Hello! üëã How can I assist you today?';
        } else if (lowerMessage.includes('thank')) {
            response = 'You\'re welcome! Is there anything else I can help you with? üòä';
        } else {
            response = 'I can help you with orders, payments, returns, and shipping. You can also browse our categories or search for specific products. What would you like help with?';
        }
        
        addChatMessage(response, 'bot');
    }

    function sendQuickReply(message) {
        addChatMessage(message, 'user');
        showTypingIndicator();
        setTimeout(() => {
            hideTypingIndicator();
            respondToMessage(message);
        }, 800);
    }

    function handleChatEnter(event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    }

    // Hide chat FAB on non-home pages and during guide
    function updateChatFabVisibility() {
        const fab = document.getElementById('chatFab');
        if (currentPage === 'home' && !chatOpen) {
            fab.style.display = 'flex';
        } else {
            fab.style.display = 'none';
        }
    }

    // Promo Carousel
    let currentSlide = 0;
    let carouselInterval;
    let touchStartX = 0;
    let touchEndX = 0;

    function initCarousel() {
        const track = document.getElementById('promoTrack');
        const dotsContainer = document.getElementById('carouselDots');
        const slides = document.querySelectorAll('.promo-banner');
        const totalSlides = slides.length;

        // Create dots
        for (let i = 0; i < totalSlides; i++) {
            const dot = document.createElement('div');
            dot.className = 'dot' + (i === 0 ? ' active' : '');
            dot.onclick = () => goToSlide(i);
            dotsContainer.appendChild(dot);
        }

        // Auto slide
        function autoSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            updateCarousel();
        }

        carouselInterval = setInterval(autoSlide, 4000);

        // Touch events for swipe
        const carousel = document.getElementById('promoCarousel');
        
        carousel.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            clearInterval(carouselInterval);
        });

        carousel.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
            carouselInterval = setInterval(autoSlide, 4000);
        });

        // Mouse events for desktop
        carousel.addEventListener('mouseenter', () => {
            clearInterval(carouselInterval);
        });

        carousel.addEventListener('mouseleave', () => {
            carouselInterval = setInterval(autoSlide, 4000);
        });
    }

    function handleSwipe() {
        const swipeThreshold = 50;
        const diff = touchStartX - touchEndX;

        if (Math.abs(diff) > swipeThreshold) {
            if (diff > 0) {
                // Swipe left - next slide
                nextSlide();
            } else {
                // Swipe right - previous slide
                previousSlide();
            }
        }
    }

    function nextSlide() {
        const totalSlides = document.querySelectorAll('.promo-banner').length;
        currentSlide = (currentSlide + 1) % totalSlides;
        updateCarousel();
    }

    function previousSlide() {
        const totalSlides = document.querySelectorAll('.promo-banner').length;
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        updateCarousel();
    }

    function goToSlide(index) {
        currentSlide = index;
        updateCarousel();
    }

    function updateCarousel() {
        const track = document.getElementById('promoTrack');
        const dots = document.querySelectorAll('.dot');
        
        track.style.transform = `translateX(-${currentSlide * 100}%)`;
        
        dots.forEach((dot, index) => {
            if (index === currentSlide) {
                dot.classList.add('active');
            } else {
                dot.classList.remove('active');
            }
        });
    }

    // Initialize
    displayProducts(products);
    updateCartBadge();
    initCarousel();
    
    // Show app content immediately
    navigateTo('home');
    updateChatFabVisibility();
    
    // Start guide if first time visitor
    if (!hasSeenGuide) {
        setTimeout(() => {
            startGuide();
        }, 800);
    }
</script>


</body>
</html>
